<!DOCTYPE html>
<html lang="en"  style=" background-image:url(../static/login_bg.jpg);background-size:100% 100%">
<head>
<meta charset="UTF-8">
<title>高校讲座预约系统-登录</title>
<meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
<!-- bootstrap 3.0.2 -->
<link href="../static/login/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<!-- font Awesome -->
<link href="../static/login/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
<!-- Theme style -->
<link href="../static/login/css/ALTE.css" rel="stylesheet" type="text/css" />



<style>


.codeBtn{
position:relative;
color:blue;
top:7px;
left:75%;
z-index:99;
}
</style>

</head>
<body  style=" background: transparent" >

<div id="app">
	<div class="form-box" id="login-box" style="width:600px">
		<div class="header">高校讲座预约系统-登录</div>
		<div>
			<div class="body bg-gray">
				<div class="form-group">
					<label>登录名/工号/学号</label>
					<input id="name" name="name" type="text" placeholder="请输入登录名/工号/学号"  class="form-control ">
				</div>
				<div class="form-group">
					<label>密码</label>
					<input id="password" name="password" type="password" placeholder="请输入密码"  class="form-control ">
				</div>
				<div class="form-group">
					<label>图片验证码</label>
					<img id="codeImg1"  name="codeImg"  style="width:100px;float:right;color:blue;left:80%; z-index:99;" alt="点击更换" title="点击更换" />
					<input type="text" name="imgCode" class="form-control"  id="imgCode" value="">
				</div>
				<div class="form-group">
					<label>登录角色</label>
					<input name="loginType" type="radio" value="1" id="loginType1" style="margin-left:10px;"/><label for="loginType1">管理员</label>
					<input name="loginType" type="radio" value="2" id="loginType2" style="margin-left:10px;"/><label for="loginType2">讲座管理员</label>
					<input name="loginType" type="radio" value="3" id="loginType3" style="margin-left:10px;"/><label for="loginType3">教师</label>
					<input name="loginType" type="radio" value="4" id="loginType4" style="margin-left:10px;"/><label for="loginType4">学生</label>
				</div>
			</div>
			<div class="footer">
				<button type="button"  onclick="submitForm()" class="btn bg-olive btn-block">登录 </button>
			</div>
		</div>
		<div class="margin text-center">
			<span style="color:white">Copyright 高校讲座预约系统</span>
		</div>
	</div>
</div>
<!-- jQuery 2.0.2 -->
<script type="text/javascript" src="../static/common/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="../static/config.js"></script>
<script type="text/javascript" src="../static/vue.js"></script>
<script type="text/javascript" src="../static/common/utils/listutils.js?v=26573"></script>

<script>
$(document).ready(function(e) {
	changeCode();
	$("#codeImg1").bind("click",changeCode);
});
function genTimestamp(){
	var time = new Date();
	return time.getTime();
}
function changeCode(){
	$.ajax({
		type: 'post',
		url: uri+"/"+'/validCode/code',
		data: {
		},
		success: function(result) {
			codeToken = result.codeToken;
			$("#codeImg1").attr("src",result.imgUrl);
		}
	});
}
function submitForm(){
	$.ajax({
		type: 'post',
		url: uri+'/login/sysSubmit',
		data: {
			'imgCode':$('#imgCode').val(),
			'imgCodeToken':codeToken,
			'name':$("#name").val(),
			'password':$("#password").val(),
			'loginType':getCheckBoxVal('loginType')
		},
		success: function(result) {
			if(result.code==1){
				setCookie('loginId',result.loginId,1);
				setCookie('loginType',result.loginType,1);
				setCookie('loginName',result.loginName,1);
				setCookie('loginToken',result.loginToken,1);
				setCookie('roleName',result.roleName,1);
				var lt = getCheckBoxVal('loginType');
				if(lt=='1'){
					window.location.href="admin/index.html";
				}
				if(lt=='2'){
					window.location.href="manage/index.html";
				}
				if(lt=='3'){
					window.location.href="teacher/index.html";
				}
				if(lt=='4'){
					window.location.href="student/index.html";
				}
				}else{
				alert(result.msg);
			}
		}
	});
}
var  vm=new Vue({
	el : '#app',
	data:{
	},
	created(){
		this.initData();
	},
	methods:{
		initData(){
		}
	}
});

</script>

</body>
</html>

