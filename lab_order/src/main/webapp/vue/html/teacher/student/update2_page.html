<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
<title>修改-学生 </title>
<meta name="description" content="Dashmix - Bootstrap 4 Admin Template &amp; UI Framework created by pixelcave and published on Themeforest">
<meta name="author" content="pixelcave">
<meta name="robots" content="noindex, nofollow">
<meta property="og:title" content="Dashmix - Bootstrap 4 Admin Template &amp; UI Framework">
<meta property="og:site_name" content="Dashmix">
<meta property="og:description" content="Dashmix - Bootstrap 4 Admin Template &amp; UI Framework created by pixelcave and published on Themeforest">
<meta property="og:type" content="website">
<meta property="og:url" content="">
<meta property="og:image" content="">

<link rel="stylesheet" href="../../../static/admin/css/css2.css">
<link rel="stylesheet" id="css-main" href="../../../static/admin/css/dashmix.min.css">
<link rel="stylesheet" type="text/css" href="../../../static/selectsearch/jquery.searchableSelect.css" />

<style>
.bodyClass::-webkit-scrollbar {
display: none; /* Chrome Safari */
}
.bodyClass {
scrollbar-width: none; /* firefox */
-ms-overflow-style: none; /* IE 10+ */
overflow-x: hidden;
overflow-y: auto;
}

.dz-image>img{
width:120px;
height:120px;
}
</style>
</head>
<body class="bodyClass">

<div id="app">
	<div id="page-container" class="sidebar-dark enable-page-overlay side-scroll page-header-fixed main-content-narrow">
		<main id="main-container">
			<div class="content">
				<div class="block block-rounded">
					<div class="block-header block-header-default">
						<h3 class="block-title">修改-学生 </h3>
					</div>
					<div class="block-content block-content-full">
						<div>
							<div class="row">
								<div class="col-lg-8 col-xl-5">
									<div class="form-group" id="stuNoParentContent">
										<label>学号<span style="color:red">(*必填)</span></label>
										<input type="text" :value="data.stuNo"  placeholder="请输入学号" id="stuNo" class="form-control">
									</div>
									<div class="form-group" id="passwordParentContent">
										<label>密码<span style="color:red">(*必填)</span></label>
										<input type="text" :value="data.password"  placeholder="请输入密码" id="password" class="form-control">
									</div>
									<div class="form-group" id="realNameParentContent">
										<label>姓名<span style="color:red">(*必填)</span></label>
										<input type="text" :value="data.realName"  placeholder="请输入姓名" id="realName" class="form-control">
									</div>
									<div class="form-group" id="celPhoneParentContent">
										<label>联系电话<span style="color:red">(*必填)</span></label>
										<input type="text" :value="data.celPhone"  placeholder="请输入联系电话" id="celPhone" class="form-control">
									</div>
									<div class="form-group" id="emailParentContent">
										<label>邮箱<span style="color:red">(*必填)</span></label>
										<input type="text" :value="data.email"  placeholder="请输入邮箱" id="email" class="form-control">
									</div>
									<div class="form-group" id="sexParentContent">
										<label>性别<span style="color:red">(*必填)</span></label>
										<select id="sex"  class="form-control">
											<template v-for="item in sexList">
												<option v-if="item.id==data.sex" :value="item.id" selected>{{item.name}}</option>
												<option v-if="item.id!=data.sex" :value="item.id">{{item.name}}</option>
											</template>
										</select>
									</div>
									<div class="form-group" id="stuTypeParentContent">
										<label>学生类型<span style="color:red">(*必填)</span></label>
										<select id="stuType"  class="form-control">
											<template v-for="item in stuTypeList">
												<option v-if="item.id==data.stuType" :value="item.id" selected>{{item.name}}</option>
												<option v-if="item.id!=data.stuType" :value="item.id">{{item.name}}</option>
											</template>
										</select>
									</div>
									<div class="form-group" id="cidParentContent">
										<label>学院<span style="color:red">(*必填)</span></label>
										<select  id="cid"   >
											<template v-for="item in collegeMsgList">
												<option v-if="item.id==data.cid" :value="item.id" selected>{{item.name}}</option>
												<option v-if="item.id!=data.cid" :value="item.id">{{item.name}}</option>
											</template>
										</select>
									</div>
									<div class="form-group" id="classNameParentContent">
										<label>班级<span style="color:red">(*必填)</span></label>
										<input type="text" :value="data.className"  placeholder="请输入班级" id="className" class="form-control">
									</div>
									<div class="form-group">
										<button type="button" onclick="submitData();" class="btn btn-primary">提交</button>
										<button type="button"   onclick="javascript:history.back(-1);" class="btn btn-light">返回</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</main>
	</div>
</div>
<script type="text/javascript" src="../../../static/common/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="../../../static/vue.js"></script>
<script type="text/javascript" src="../../../static/config.js"></script>
<script src="../../../static/admin/js/dashmix.core.min.js"></script>
<script src="../../../static/admin/js/dashmix.app.min.js"></script>
<script src="../../../static/admin/js/Chart.bundle.min.js"></script>
<script src="../../../static/admin/js/be_pages_dashboard.min.js"></script>
<script type="text/javascript" src="../../../static/selectsearch/jquery.searchableSelect.js"></script>
<script type="text/javascript" src="../../../static/common/utils/listutils.js?v=0337"></script>

<script>
var  vm=new Vue({
	el : '#app',
	data:{
		loginToken:currentLogin.loginToken,
		requestUri:uri,
		loginName:'',
		roleName:'',
		loginId:'',
		loginType:'',
		data:{
		},
		dataList:[],
		collegeMsgList:[],
		stuTypeList:[],
		sexList:[],
	},
	created(){
		this.init();
	},
	methods:{
		init(){
			this.getInitData();
		},
		getInitData(){
			$.ajax({
				dataType:"json",
				type:"post",
				url:uri+"/teacher/student/update2",
				data:{
					'id': (httpData['id']==undefined?'':httpData['id']),
					"loginToken":currentLogin.loginToken
				},
				success:function (data) {
					if(data.code!=undefined&&data.code==0){
						alert(data.msg);
						return;
					}
					vm.$data.collegeMsgList= data.collegeMsgList;
					vm.$data.stuTypeList= data.stuTypeList;
					vm.$data.sexList= data.sexList;
					vm.$data.data= data.data;
					vm.$nextTick(function () {
						$('#cid').next().remove();
						$('#cid').searchableSelect();
						$(".searchable-select").css("width","100%");
						$(".searchable-select").css("height","35px");
						$(".searchable-select-holder").css("min-height","20px");
						$(".searchable-select-holder").css("height","35px");
						$(".searchable-select").css("min-width","40px");
					})
				}
			})
		},
	}
});
vm.$data.loginName = currentLogin.loginName;
vm.$data.roleName = currentLogin.roleName;
vm.$data.loginId = currentLogin.loginId;
vm.$data.loginType = currentLogin.loginType;
function submitData(){
	var stuNo= $('#stuNo').val();
	var password= $('#password').val();
	var realName= $('#realName').val();
	var celPhone= $('#celPhone').val();
	var email= $('#email').val();
	var sex= $('#sex').val();
	var stuType= $('#stuType').val();
	var cid=$('#cid').val()
	var cid= $('#cid').val();
	var className= $('#className').val();
	$.ajax({
		type: 'post',
		url: uri+'/teacher/student/update2_submit',
		data:{
			"loginToken":currentLogin.loginToken,
			"id":vm.$data.data.id,
			"stuNo":stuNo,
			"password":password,
			"realName":realName,
			"celPhone":celPhone,
			"email":email,
			"sex":sex,
			"stuType":stuType,
			"cid":cid,
			"className":className
		},
		success: function(result) {
			if(result.code == 0){
				alert(result.msg);
				}else{
				alert(result.msg);
				window.location.href="../../../html/teacher/student/list.html";
			}
		}
	});
}

</script>

</body>
</html>

